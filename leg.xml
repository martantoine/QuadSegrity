<!-- Antoine Vincent Martin 
-->

<mujoco model="Tensegrity Leg">
  <option timestep="0.005" iterations="50" solver="Newton" tolerance="1e-10"/>

  <default>
	  <!--<joint type="hinge" pos="0 0 0" axis="0 0 1" limited="true" range="0 120" damping="0.1"/>-->
    <joint type="ball"/>
    <muscle ctrllimited="true" ctrlrange="-1000 1000"/>
    <geom size="0.003" mass="0.2"/>
    <site size="0.005"/>
    <tendon rgba="0 1 0 1" stiffness="1000" damping="10"/>
  </default>

  <asset>
    <texture name="texplane" type="2d" builtin="checker" rgb1=".25 .25 .25" rgb2=".28 .28 .28" width="512" height="512" markrgb=".8 .8 .8"/>
    <material name="matplane" reflectance="0.0" texture="texplane" texrepeat="1 1" texuniform="true"/>
  </asset>

  <worldbody>
    <geom name="floor" pos="0 0 -1" size="0 0 1" type="plane" material="matplane"/>

    <light directional="true" diffuse=".8 .8 .8" specular=".2 .2 .2" pos="0 0 5" dir="0 0 -1"/>

    <site name="s0" pos="-0.15 0    0"/>
    <site name="w0" pos="0.1   0.05 0" rgba="0 .7 0 1" group="1"/>
    <site name="w1" pos="0.1  -0.05 0" rgba="0 .7 0 1" group="1"/>
    <site name="r0" pos="0.05   0 0" rgba="0 0 .7 1" group="1"/>

    <geom type="capsule" fromto="0    0 0  0.05 0    0" rgba=".5 .1 .1 1"/>
    <geom type="capsule" fromto="0.05 0 0  0.1 0.05  0" rgba=".5 .1 .1 1"/>
    <geom type="capsule" fromto="0.05 0 0  0.1 -0.05 0" rgba=".5 .1 .1 1"/>

    <body pos="0.1 0 0">
      <joint type="free"/>
      <geom type="capsule" fromto="0 0 0   0.05156 0  0.03" rgba=".5 .1 .1 1"/>
      <geom type="capsule" fromto="0 0 0   0       0 -0.06" rgba=".5 .1 .1 1"/>
      <geom type="capsule" fromto="0 0 0  -0.05156 0  0.03" rgba=".5 .1 .1 1"/>

      <site name="x0" pos=" 0.05156 0  0.03" rgba="0 .7 0 1" group="1"/>
      <site name="x1" pos=" 0       0 -0.06" rgba="0 .7 0 1" group="1"/>
      <site name="x2" pos="-0.05156 0  0.03" rgba="0 .7 0 1" group="1"/>
      <site name="r1" pos=" 0       0 -0.03" rgba="0 0 .7 1" group="1"/>
      <site name="r3" pos=" 0.02578 0  0.015" rgba="0 0 .7 1" group="1"/>
      <site name="r4" pos="-0.02578 0  0.015" rgba="0 0 .7 1" group="1"/>
    </body>
    
    <body pos="0.2 0 0" euler="0 0 180">
      <joint type="free"/>
      <geom type="capsule" fromto="0    0 0  0.05 0     0" rgba=".5 .1 .1 1"/>
      <geom type="capsule" fromto="0.05 0 0  0.1  0.035 0" rgba=".5 .1 .1 1"/>
      <geom type="capsule" fromto="0.05 0 0  0.1 -0.035 0" rgba=".5 .1 .1 1"/>
      <site name="w01" pos="0.1  0.035 0" rgba="0 .7 0 1" group="1"/>
      <site name="w11" pos="0.1 -0.035 0" rgba="0 .7 0 1" group="1"/>
      <site name="r2" pos="0.05   0 0" rgba="0 0 .7 1" group="1"/>
   </body>
    

   
    <!--
    <body pos="0 0 0">
      <geom name="waist" type="capsule" size="0.045" fromto="0 0 0  0.05 0 0" rgba=".5 .1 .1 1"/>
      <joint name="shoulder"/>
      <geom name="shoulder" type="cylinder" pos="0 0 0" size=".1 .05" rgba=".5 .1 .8 .5" mass="0" group="1"/>

      <site name="s1" pos="0.15 0.06 0" size="0.02"/>
      <site name="s2" pos="0.15 -0.06 0" size="0.02"/>
    </body>
    -->
  </worldbody>

  <tendon>
    <spatial name="T0a" width="0.001">
      <site site="w0"/>
      <site site="x0"/>
    </spatial>
    <spatial name="T0b" width="0.001">  
      <site site="w1"/>
      <site site="x0"/>
    </spatial>
    
    <spatial name="T3a" width="0.001">
      <site site="w01"/>
      <site site="x0"/>
    </spatial>
    <spatial name="T3b" width="0.001">
      <site site="w11"/>
      <site site="x0"/>
    </spatial>
    
    <spatial name="T1a" width="0.001">
      <site site="x1"/>
      <site site="w0"/>
    </spatial>
    <spatial name="T1b" width="0.001">
      <site site="x1"/>
      <site site="w1"/>
    </spatial>
    
    <spatial name="T4a" width="0.001">
      <site site="w01"/>
      <site site="x1"/>
    </spatial>
    <spatial name="T4b" width="0.001">
      <site site="x1"/>
      <site site="w11"/>
    </spatial>

    <spatial name="T2a" width="0.001">
      <site site="w0"/>
      <site site="x2"/>
    </spatial>
    <spatial name="T2b" width="0.001">
      <site site="x2"/>
      <site site="w1"/>
    </spatial>
    
    <spatial name="T5a" width="0.001">
      <site site="w01"/>
      <site site="x2"/>
    </spatial>
    <spatial name="T5b" width="0.001">
      <site site="x2"/>
      <site site="w11"/>
    </spatial>

    <spatial name="T6" width="0.001">
      <site site="r0"/>
      <site site="r1"/>
      <site site="r2"/>
    </spatial>
    <spatial name="T7" width="0.001">
      <site site="r0"/>
      <site site="r4"/>
      <site site="r3"/>
      <site site="r2"/>
    </spatial>
  </tendon>
  <!--
  <actuator>
    <muscle name="T6" tendon="T6" range="300 320"/>
	  </actuator>
  -->
</mujoco>
